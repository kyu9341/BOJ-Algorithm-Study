# Problem 17144

## 미세먼지 안녕!

### 문제
미세먼지를 제거하기 위해 구사과는 공기청정기를 설치하려고 한다. 공기청정기의 성능을 테스트하기 위해 구사과는 집을 크기가 R×C인 격자판으로 나타냈고, 1×1 크기의 칸으로 나눴다. 구사과는 뛰어난 코딩 실력을 이용해 각 칸 (r, c)에 있는 미세먼지의 양을 실시간으로 모니터링하는 시스템을 개발했다. (r, c)는 r행 c열을 의미한다.

공기청정기는 항상 1번 열에 설치되어 있고, 크기는 두 행을 차지한다. 공기청정기가 설치되어 있지 않은 칸에는 미세먼지가 있고, (r, c)에 있는 미세먼지의 양은 Ar,c이다.

1초 동안 아래 적힌 일이 순서대로 일어난다.

1. 미세먼지가 확산된다. 확산은 미세먼지가 있는 모든 칸에서 동시에 일어난다.
	- (r, c)에 있는 미세먼지는 인접한 네 방향으로 확산된다.
	- 인접한 방향에 공기청정기가 있거나, 칸이 없으면 그 방향으로는 확산이 일어나지 않는다.
	- 확산되는 양은 Ar,c/5이고 소수점은 버린다.
	- (r, c)에 남은 미세먼지의 양은 Ar,c - (Ar,c/5)×(확산된 방향의 개수) 이다.
2. 공기청정기가 작동한다.
	- 공기청정기에서는 바람이 나온다.
	- 위쪽 공기청정기의 바람은 반시계방향으로 순환하고, 아래쪽 공기청정기의 바람은 시계방향으로 순환한다.
	- 바람이 불면 미세먼지가 바람의 방향대로 모두 한 칸씩 이동한다.
	- 공기청정기에서 부는 바람은 미세먼지가 없는 바람이고, 공기청정기로 들어간 미세먼지는 모두 정화된다.
다음은 확산의 예시이다.

왼쪽과 오른쪽에 칸이 없기 때문에, 두 방향으로만 확산이 일어났다.

인접한 네 방향으로 모두 확산이 일어난다.

공기청정기가 있는 칸으로는 확산이 일어나지 않는다.

공기청정기의 바람은 다음과 같은 방향으로 순환한다.

방의 정보가 주어졌을 때, T초가 지난 후 구사과의 방에 남아있는 미세먼지의 양을 구해보자.

### 입력
첫째 줄에 R, C, T (6 ≤ R, C ≤ 50, 1 ≤ T ≤ 1,000) 가 주어진다.

둘째 줄부터 R개의 줄에 Ar,c (-1 ≤ Ar,c ≤ 1,000)가 주어진다. 공기청정기가 설치된 곳은 Ar,c가 -1이고, 나머지 값은 미세먼지의 양이다. -1은 2번 위아래로 붙어져 있고, 가장 윗 행, 아랫 행과 두 칸이상 떨어져 있다.

### 출력
첫째 줄에 T초가 지난 후 구사과 방에 남아있는 미세먼지의 양을 출력한다.

### 문제 링크
<https://www.acmicpc.net/problem/17144>

### 예제 입력 1
7 8 1
0 0 0 0 0 0 0 9
0 0 0 0 3 0 0 8
-1 0 5 0 0 0 22 0
-1 8 0 0 0 0 0 0
0 0 0 0 0 10 43 0
0 0 5 0 15 0 0 0
0 0 40 0 0 0 20 0

### 예제 출력 1
188

### solve
- 미세먼지를 확산시키는 함수 spread()를 만든다.
	- 4방향으로 확산이 일어나지만 공기청정기의 칸과 벽으로는 확산이 되지 않는다.
	- 따라서, 공기청정기와 벽인 경우를 제외하고 (현재 위치의 양 / 5) 를 하여 옆 칸으로 퍼뜨리고 확산된 양 만큼만 현재 칸에서 빼준다.
	- 이 때, 옆 칸에서 확산이 일어난 뒤 그 결과를 가지고 현재 칸에서 확산이 되면 안되기 때문에 확산을 한번에 일어나게 한다.
	- 현재 칸에 줄어든 값만 저장한 뒤,
	- tmp배열에 각 칸에서 확산되어 퍼진 미세먼지의 양을 누적한 뒤 한번에 원래의 배열에 더해준다.
- 확산시키는 함수를 구현하였으니 공기청정기에 의해 미세먼지를 이동시키는 함수를 구현한다.
	- 미세먼지의 이동을 구현하기 위해 공기청정기와 가까운 칸부터 시작하여 공기청정기의 바람이 나오는 부분까지 땡겨주는 식으로 이동시킨다.
- 이 후 t초 만큼 확산과 이동을 반복한 뒤 미세먼지의 합을 구한다.

### 코드 설명
```C++
#include<algorithm>
#include<vector>
#include<string>
#include<iostream>
#include<cstring>
#include<stack>
#include<queue>
#include<map>
#include<climits>
#include<cmath>

using namespace std;
const int MAX = 50;
int a[MAX][MAX];
int tmp[MAX][MAX]; // 한번에 확산이 이루어지게 하기 위해 사용할 임시 배열

int dx[] = { 1, -1, 0, 0 };
int dy[] = { 0, 0, 1, -1 };
int r, c, t;
vector<int> cleaner; // 공기청정기 위치

void print() { // 출력 함수
	cout << '\n';
	for (int x = 0; x < r; x++) {
		for (int y = 0; y < c; y++) {
			cout << a[x][y] << ' ';
		}
		cout << '\n';
	}
	cout << '\n';
}
void wind() {
	// 위칸 공기청정기 동작
	for (int i = cleaner[0] - 1; i > 0; i--) { // 0열 아래로 이동
		a[i][0] = a[i - 1][0];
	}
	for (int i = 0; i < c - 1; i++) { // 0행 왼쪽으로 이동
		a[0][i] = a[0][i + 1];
	}
	for (int i = 0; i < cleaner[0]; i++) { // c - 1열 위로 이동
		a[i][c - 1] = a[i + 1][c - 1];
	}
	for (int i = c - 1; i > 1; i--) { // 공기청정기 윗부분 행 오른쪽으로 이동
		a[cleaner[0]][i] = a[cleaner[0]][i - 1];
	}
	a[cleaner[0]][1] = 0;

	// 아래칸 공기청정기 동작
	for (int i = cleaner[1] + 1; i < r - 1; i++) { // 0열 위로 이동
		a[i][0] = a[i + 1][0];
	}
	for (int i = 0; i < c - 1; i++) { // r - 1행 왼쪽으로 이동
		a[r - 1][i] = a[r - 1][i + 1];
	}
	for (int i = r - 1; i > cleaner[1]; i--) { // c - 1열 아래로 이동
		a[i][c - 1] = a[i - 1][c - 1];
	}
	for (int i = c - 1; i > 1; i--) { // 공기청정기 아랫부분 행 오른쪽으로 이동
		a[cleaner[1]][i] = a[cleaner[1]][i - 1];
	}
	a[cleaner[1]][1] = 0;
}

void spread() {
	// 미세먼지 확산
	for (int x = 0; x < r; x++) {
		for (int y = 0; y < c; y++) {
			if (a[x][y] > 0) {
				int sum = 0;
				for (int k = 0; k < 4; k++) {
					int nx = x + dx[k];
					int ny = y + dy[k];

					if (nx < 0 || ny < 0 || nx >= r || ny >= c) continue;
					if (a[nx][ny] == -1) continue;

					tmp[nx][ny] += a[x][y] / 5;
					sum += a[x][y] / 5;

				}
				a[x][y] -= sum; // 확산된 양만큼 빼줌
			}
		}
	}

	for (int x = 0; x < r; x++) {
		for (int y = 0; y < c; y++) {
			a[x][y] += tmp[x][y]; // 확산된 양을 한번에 더해줌
			tmp[x][y] = 0; // tmp 초기화
		}
	}

}


int main(void) {
	ios_base::sync_with_stdio(false);
	cin.tie(nullptr);
	cout.tie(nullptr);

	cin >> r >> c >> t;

	for (int i = 0; i < r; i++)
		for (int j = 0; j < c; j++) {
			cin >> a[i][j];
			if (a[i][j] == -1) cleaner.push_back(i); // 공기 청정기 위치 저장
		}
	while (t--) {
		spread(); // 확산
		wind(); // 이동
	}

	int ans = 0;
	for(int i =0; i < r; i++)
		for (int j = 0; j < c; j++) {
			ans += a[i][j];
		}
	ans += 2; // 공기 청정기 제거

	cout << ans << '\n';
}
```
